<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰©å±•æ¨¡å— - RYKit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/swift.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; position: relative; }
        .back-btn { position: absolute; top: 20px; left: 20px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; color: white; padding: 10px 20px; border-radius: 25px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s ease; font-size: 14px; }
        .back-btn:hover { background: white; color: #667eea; transform: translateX(-5px); }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        .content { padding: 40px; }
        .section { margin-bottom: 50px; }
        .section-title { font-size: 2em; color: #333; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #667eea; }
        .subsection { margin-bottom: 30px; }
        .subsection-title { font-size: 1.5em; color: #667eea; margin-bottom: 15px; }
        .description { line-height: 1.8; color: #555; margin-bottom: 20px; font-size: 1.05em; }
        .feature-list { list-style: none; margin: 20px 0; }
        .feature-list li { padding: 12px 0 12px 35px; position: relative; color: #555; line-height: 1.6; }
        .feature-list li:before { content: "âœ“"; position: absolute; left: 10px; color: #667eea; font-weight: bold; font-size: 1.2em; }
        .code-block { margin: 20px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .code-header { background: #21252b; color: #abb2bf; padding: 12px 20px; font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; }
        .code-lang { font-weight: bold; color: #61afef; }
        pre { margin: 0 !important; border-radius: 0 !important; }
        pre code { display: block; padding: 20px !important; font-size: 14px; line-height: 1.6; font-family: 'Monaco', 'Menlo', 'Consolas', monospace; }
        .api-table { width: 100%; border-collapse: collapse; margin: 20px 0; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border-radius: 10px; overflow: hidden; }
        .api-table th { background: #667eea; color: white; padding: 15px; text-align: left; font-weight: 600; }
        .api-table td { padding: 15px; border-bottom: 1px solid #eee; }
        .api-table tr:last-child td { border-bottom: none; }
        .api-table tr:nth-child(even) { background: #f8f9fa; }
        .highlight-box { background: #f0f7ff; border-left: 4px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .highlight-box-title { font-weight: bold; color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .tag { display: inline-block; background: #667eea; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85em; margin-right: 10px; margin-bottom: 10px; }
        @media (max-width: 768px) { .header h1 { font-size: 1.8em; } .content { padding: 20px; } .back-btn { position: static; margin-bottom: 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn"><span>â†</span><span>è¿”å›ç´¢å¼•</span></a>
            <h1><span>ğŸ”§</span><span>æ‰©å±•æ¨¡å—</span></h1>
            <p>å¸¸ç”¨çš„ Swift ç±»å‹æ‰©å±•ï¼Œæå‡å¼€å‘æ•ˆç‡</p>
        </div>

        <div class="content">
            <div class="section">
                <h2 class="section-title">æ¨¡å—æ¦‚è¿°</h2>
                <div class="description">
                    æ‰©å±•æ¨¡å—ä¸º Swift æ ‡å‡†åº“çš„å¸¸ç”¨ç±»å‹æ·»åŠ äº†å®ç”¨çš„æ‰©å±•æ–¹æ³•ï¼ŒåŒ…æ‹¬ Collectionã€Stringã€Number ç­‰ã€‚è¿™äº›æ‰©å±•ç®€åŒ–äº†å¸¸è§æ“ä½œï¼Œæä¾›äº†ç±»å‹å®‰å…¨çš„è®¿é—®æ–¹å¼ã€‚
                </div>
                <div style="margin-top: 20px;">
                    <span class="tag">iOS 13.0+</span>
                    <span class="tag">macOS 10.15+</span>
                    <span class="tag">tvOS 13.0+</span>
                    <span class="tag">Swift 5.0+</span>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">å®‰è£…æ–¹å¼</h2>
                <div class="code-block">
                    <div class="code-header"><span class="code-lang">Ruby (Podfile)</span></div>
                    <pre><code class="language-ruby">pod 'RYKit/Extensions'</code></pre>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Collection æ‰©å±•</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ nilIfEmpty</h3>
                    <div class="description">ç©ºé›†åˆè¿”å› nilï¼Œéç©ºé›†åˆè¿”å›è‡ªèº«ã€‚</div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">let emptyArray: [Int] = []
let result1 = emptyArray.nilIfEmpty  // nil

let nonEmptyArray = [1, 2, 3]
let result2 = nonEmptyArray.nilIfEmpty  // [1, 2, 3]

// åº”ç”¨åœºæ™¯ï¼šå¯é€‰é“¾è°ƒç”¨
let items: [String] = []
items.nilIfEmpty?.forEach { print($0) }  // ä¸æ‰§è¡Œ

let validItems = ["A", "B"]
validItems.nilIfEmpty?.forEach { print($0) }  // æ‰§è¡Œ</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ SHA1 å“ˆå¸Œ</h3>
                    <div class="description">è®¡ç®—å­—ç¬¦ä¸²ã€å­—å…¸å’Œæ•°ç»„çš„ SHA1 å“ˆå¸Œå€¼ã€‚</div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>SHA1 å“ˆå¸Œè®¡ç®—</span></div>
                        <pre><code class="language-swift">// å­—ç¬¦ä¸² SHA1
let text = "Hello, World!"
let hash1 = text.sha1
print(hash1)  // "0a0a9f2a6772942557ab5355d76af442f8f65e01"

// å­—å…¸ SHA1 (æŒ‰ key æ’åºåè®¡ç®—)
let params = ["name": "å¼ ä¸‰", "age": "25", "city": "åŒ—äº¬"]
let hash2 = params.sha1
print(hash2)  // åŸºäº "age=25&city=åŒ—äº¬&name=å¼ ä¸‰" è®¡ç®—

// æ•°ç»„ SHA1 (æ’åºåè®¡ç®—)
let tags = ["swift", "ios", "mobile"]
let hash3 = tags.sha1
print(hash3)  // åŸºäº "ios,mobile,swift" è®¡ç®—

// åº”ç”¨åœºæ™¯ï¼šAPI ç­¾å
func signRequest(params: [String: String], secret: String) -> String {
    let signature = (params.sortedURLParams + secret).sha1
    return signature
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ ç±»å‹å®‰å…¨çš„ä¸‹æ ‡è®¿é—®</h3>
                    <div class="description">æä¾›ç±»å‹å®‰å…¨çš„å­—å…¸å’Œæ•°ç»„è®¿é—®ï¼Œæ”¯æŒè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚</div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>ç±»å‹å®‰å…¨è®¿é—®</span></div>
                        <pre><code class="language-swift">// Dictionary æ‰©å±•
let dict: [String: Any] = [
    "name": "å¼ ä¸‰",
    "age": 25,
    "score": 95.5,
    "isVIP": true,
    "tags": ["A", "B"],
    "profile": ["city": "åŒ—äº¬"]
]

// åŸºç¡€ç±»å‹è®¿é—®ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰
let name: String? = dict[(key: "name", type: String.self)]  // "å¼ ä¸‰"
let age: Int? = dict[(key: "age", type: Int.self)]          // 25
let score: Double? = dict[(key: "score", type: Double.self)] // 95.5
let isVIP: Bool? = dict[(key: "isVIP", type: Bool.self)]    // true

// å¤æ‚ç±»å‹è®¿é—®
let tags: [Any]? = dict[(key: "tags", type: [Any].self)]
let profile: [String: Any]? = dict[(key: "profile", type: [String: Any].self)]

// Array æ‰©å±•
let array: [Any] = [100, "Hello", 3.14, true, ["key": "value"]]

let num: Int? = array[(index: 0, type: Int.self)]      // 100
let str: String? = array[(index: 1, type: String.self)] // "Hello"
let decimal: Double? = array[(index: 2, type: Double.self)] // 3.14
let bool: Bool? = array[(index: 3, type: Bool.self)]   // true
let dict2: [String: Any]? = array[(index: 4, type: [String: Any].self)]

// è¶Šç•Œå®‰å…¨
let outOfBounds: Int? = array[(index: 100, type: Int.self)]  // nil</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ ç±»å‹è½¬æ¢æ–¹æ³•</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>æ‰¹é‡ç±»å‹è½¬æ¢</span></div>
                        <pre><code class="language-swift">// Dictionary å€¼è½¬æ¢
let dict: [String: Any] = ["a": "1", "b": "2", "c": "abc"]

// map: ä¿ç•™æ‰€æœ‰é”®ï¼Œå€¼å¯èƒ½ä¸º nil
let mapped: [String: Int?] = dict.mapValuesByConvertingTo(Int.self)
// ["a": 1, "b": 2, "c": nil]

// compactMap: åªä¿ç•™è½¬æ¢æˆåŠŸçš„é”®å€¼å¯¹
let compacted: [String: Int] = dict.compactMapValuesByConvertingTo(Int.self)
// ["a": 1, "b": 2]

// Array å…ƒç´ è½¬æ¢
let array: [Any] = ["1", 2, "3", "abc", 4]

// map: ä¿ç•™æ‰€æœ‰å…ƒç´ 
let mapped2: [Int?] = array.mapByConvertingTo(Int.self)
// [1, 2, 3, nil, 4]

// compactMap: åªä¿ç•™è½¬æ¢æˆåŠŸçš„å…ƒç´ 
let compacted2: [Int] = array.compactMapByConvertingTo(Int.self)
// [1, 2, 3, 4]</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">String æ‰©å±•</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ transferIfNil</h3>
                    <div class="description">å½“å­—ç¬¦ä¸²ä¸º nil æ—¶ï¼Œæä¾›é»˜è®¤å€¼ã€‚</div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">let name: String? = nil
let displayName = name.transferIfNil { "æœªå‘½å" }
print(displayName)  // "æœªå‘½å"

let validName: String? = "å¼ ä¸‰"
let displayName2 = validName.transferIfNil { "æœªå‘½å" }
print(displayName2)  // "å¼ ä¸‰"

// åº”ç”¨åœºæ™¯ï¼šUI æ˜¾ç¤º
label.text = user.nickname.transferIfNil { "ç”¨æˆ·\(user.id)" }</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Number æ‰©å±•</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ nilIfZero</h3>
                    <div class="description">å½“æ•°å€¼ä¸ºé›¶æ—¶è¿”å› nilã€‚</div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">let value1: Int = 0
let result1 = value1.nilIfZero  // nil

let value2: Int = 100
let result2 = value2.nilIfZero  // 100

let price: Double = 0.0
let result3 = price.nilIfZero  // nil

// åº”ç”¨åœºæ™¯ï¼šå¯é€‰é“¾è°ƒç”¨
let count = 0
count.nilIfZero.map { "æœ‰ \($0) æ¡æ¶ˆæ¯" }  // nil

let validCount = 5
validCount.nilIfZero.map { "æœ‰ \($0) æ¡æ¶ˆæ¯" }  // "æœ‰ 5 æ¡æ¶ˆæ¯"</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ API å‚æ•°ç­¾å</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">func signAPIRequest(params: [String: String], secret: String) -> String {
    // å‚æ•°æŒ‰ key æ’åºå¹¶æ‹¼æ¥
    let paramString = params.sortedURLParams
    
    // æ·»åŠ å¯†é’¥å¹¶è®¡ç®— SHA1
    let signature = (paramString + secret).sha1
    
    return signature
}

let params = [
    "timestamp": "1698765432",
    "userId": "12345",
    "action": "getProfile"
]

let signature = signAPIRequest(params: params, secret: "my_secret_key")
// åŸºäº "action=getProfile&timestamp=1698765432&userId=12345my_secret_key" è®¡ç®—</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ å®‰å…¨è§£æ JSON</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">// è§£æä¸ç¡®å®šç±»å‹çš„ JSON
func parseUserInfo(_ json: [String: Any]) -> User? {
    // ç±»å‹å®‰å…¨åœ°æå–å€¼
    guard let id: String = json[(key: "id", type: String.self)] else {
        return nil
    }
    
    let name: String = json[(key: "name", type: String.self)] ?? "æœªçŸ¥"
    let age: Int = json[(key: "age", type: Int.self)] ?? 0
    let email: String? = json[(key: "email", type: String.self)]
    
    return User(id: id, name: name, age: age, email: email)
}

let json: [String: Any] = [
    "id": "U001",
    "name": "å¼ ä¸‰",
    "age": 25
]

if let user = parseUserInfo(json) {
    print("ç”¨æˆ·ï¼š\(user.name)")
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ UI æ•°æ®å¤„ç†</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span></div>
                        <pre><code class="language-swift">struct ProfileViewModel {
    let user: User
    
    var displayName: String {
        user.nickname.transferIfNil { "ç”¨æˆ·\(user.id)" }
    }
    
    var badgeCount: String? {
        user.unreadCount.nilIfZero.map { "\($0)" }
    }
    
    var tagsToShow: [String]? {
        user.tags.nilIfEmpty
    }
}

// UI æ›´æ–°
func updateUI(viewModel: ProfileViewModel) {
    nameLabel.text = viewModel.displayName
    
    if let badgeText = viewModel.badgeCount {
        badgeLabel.text = badgeText
        badgeLabel.isHidden = false
    } else {
        badgeLabel.isHidden = true
    }
    
    if let tags = viewModel.tagsToShow {
        tagsView.configure(with: tags)
    } else {
        tagsView.isHidden = true
    }
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">API å‚è€ƒ</h2>
                
                <table class="api-table">
                    <thead>
                        <tr>
                            <th style="width: 40%;">æ–¹æ³•/å±æ€§</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Collection.nilIfEmpty</code></td>
                            <td>ç©ºé›†åˆè¿”å› nil</td>
                        </tr>
                        <tr>
                            <td><code>String.sha1</code></td>
                            <td>è®¡ç®— SHA1 å“ˆå¸Œ</td>
                        </tr>
                        <tr>
                            <td><code>[String: String].sha1</code></td>
                            <td>å­—å…¸æ’åºåè®¡ç®— SHA1</td>
                        </tr>
                        <tr>
                            <td><code>[String: String].sortedURLParams</code></td>
                            <td>å­—å…¸æ’åºå¹¶æ‹¼æ¥ä¸º URL å‚æ•°æ ¼å¼</td>
                        </tr>
                        <tr>
                            <td><code>[String].sha1</code></td>
                            <td>æ•°ç»„æ’åºåè®¡ç®— SHA1</td>
                        </tr>
                        <tr>
                            <td><code>Dictionary[(key:type:)]</code></td>
                            <td>ç±»å‹å®‰å…¨çš„å­—å…¸è®¿é—®</td>
                        </tr>
                        <tr>
                            <td><code>Array[(index:type:)]</code></td>
                            <td>ç±»å‹å®‰å…¨çš„æ•°ç»„è®¿é—®</td>
                        </tr>
                        <tr>
                            <td><code>Dictionary.mapValuesByConvertingTo(_:)</code></td>
                            <td>è½¬æ¢å­—å…¸çš„å€¼ç±»å‹</td>
                        </tr>
                        <tr>
                            <td><code>Dictionary.compactMapValuesByConvertingTo(_:)</code></td>
                            <td>è½¬æ¢å¹¶è¿‡æ»¤å­—å…¸çš„å€¼</td>
                        </tr>
                        <tr>
                            <td><code>Array.mapByConvertingTo(_:)</code></td>
                            <td>è½¬æ¢æ•°ç»„å…ƒç´ ç±»å‹</td>
                        </tr>
                        <tr>
                            <td><code>Array.compactMapByConvertingTo(_:)</code></td>
                            <td>è½¬æ¢å¹¶è¿‡æ»¤æ•°ç»„å…ƒç´ </td>
                        </tr>
                        <tr>
                            <td><code>String?.transferIfNil(_:)</code></td>
                            <td>nil æ—¶æä¾›é»˜è®¤å€¼</td>
                        </tr>
                        <tr>
                            <td><code>Numeric.nilIfZero</code></td>
                            <td>é›¶å€¼è¿”å› nil</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section">
                <h2 class="section-title">æœ€ä½³å®è·µ</h2>
                
                <div class="highlight-box">
                    <div class="highlight-box-title">ğŸ’¡ æ¨èåšæ³•</div>
                    <ul class="feature-list" style="margin: 10px 0;">
                        <li>ä½¿ç”¨ <code>nilIfEmpty</code> ç®€åŒ–ç©ºé›†åˆåˆ¤æ–­</li>
                        <li>ä½¿ç”¨ç±»å‹å®‰å…¨çš„ä¸‹æ ‡è®¿é—®ä»£æ›¿å¼ºåˆ¶è½¬æ¢</li>
                        <li>ä½¿ç”¨ <code>sha1</code> è¿›è¡Œæ•°æ®ç­¾åå’Œæ ¡éªŒ</li>
                        <li>ä½¿ç”¨ <code>nilIfZero</code> ç®€åŒ–é›¶å€¼å¤„ç†</li>
                        <li>ä½¿ç”¨ <code>transferIfNil</code> æä¾›å‹å¥½çš„é»˜è®¤æ˜¾ç¤º</li>
                        <li>åˆç†ä½¿ç”¨ç±»å‹è½¬æ¢æ–¹æ³•å¤„ç†ä¸ç¡®å®šç±»å‹çš„æ•°æ®</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>hljs.highlightAll();</script>
</body>
</html>
