<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥å¿—è®°å½•æ¨¡å— - ADKit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/swift.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; position: relative; }
        .back-btn { position: absolute; top: 20px; left: 20px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; color: white; padding: 10px 20px; border-radius: 25px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s ease; font-size: 14px; }
        .back-btn:hover { background: white; color: #667eea; transform: translateX(-5px); }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        .content { padding: 40px; }
        .section { margin-bottom: 50px; }
        .section-title { font-size: 2em; color: #333; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #667eea; }
        .subsection { margin-bottom: 30px; }
        .subsection-title { font-size: 1.5em; color: #667eea; margin-bottom: 15px; }
        .description { line-height: 1.8; color: #555; margin-bottom: 20px; font-size: 1.05em; }
        .feature-list { list-style: none; margin: 20px 0; }
        .feature-list li { padding: 12px 0 12px 35px; position: relative; color: #555; line-height: 1.6; }
        .feature-list li:before { content: "âœ“"; position: absolute; left: 10px; color: #667eea; font-weight: bold; font-size: 1.2em; }
        .code-block { margin: 20px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .code-header { background: #21252b; color: #abb2bf; padding: 12px 20px; font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; }
        .code-lang { font-weight: bold; color: #61afef; }
        pre { margin: 0 !important; border-radius: 0 !important; }
        pre code { display: block; padding: 20px !important; font-size: 14px; line-height: 1.6; font-family: 'Monaco', 'Menlo', 'Consolas', monospace; }
        .api-table { width: 100%; border-collapse: collapse; margin: 20px 0; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border-radius: 10px; overflow: hidden; }
        .api-table th { background: #667eea; color: white; padding: 15px; text-align: left; font-weight: 600; }
        .api-table td { padding: 15px; border-bottom: 1px solid #eee; }
        .api-table tr:last-child td { border-bottom: none; }
        .api-table tr:nth-child(even) { background: #f8f9fa; }
        .highlight-box { background: #f0f7ff; border-left: 4px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .highlight-box-title { font-weight: bold; color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .tag { display: inline-block; background: #667eea; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85em; margin-right: 10px; margin-bottom: 10px; }
        @media (max-width: 768px) { .header h1 { font-size: 1.8em; } .content { padding: 20px; } .back-btn { position: static; margin-bottom: 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn"><span>â†</span><span>è¿”å›ç´¢å¼•</span></a>
            <h1><span>ğŸ“</span><span>æ—¥å¿—è®°å½•æ¨¡å—</span></h1>
            <p>ç®€å•æ˜“ç”¨çš„æ—¥å¿—è®°å½•å·¥å…·ï¼Œæ”¯æŒä»»æ„ Encodable ç±»å‹</p>
        </div>

        <div class="content">
            <div class="section">
                <h2 class="section-title">æ¨¡å—æ¦‚è¿°</h2>
                <div class="description">
                    æ—¥å¿—è®°å½•æ¨¡å—æä¾›äº†ä¸€å¥—ç®€å•è€Œå¼ºå¤§çš„æ—¥å¿—è®°å½•è§£å†³æ–¹æ¡ˆã€‚å®ƒæ”¯æŒè®°å½•ä»»æ„éµå¾ª Encodable åè®®çš„æ•°æ®ï¼Œè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä»¥ JSON æ ¼å¼å­˜å‚¨ï¼Œä¾¿äºåç»­åˆ†æå’Œè°ƒè¯•ã€‚
                </div>
                
                <div class="highlight-box">
                    <div class="highlight-box-title">ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿</div>
                    <ul class="feature-list" style="margin: 10px 0;">
                        <li>æ”¯æŒè®°å½•ä»»æ„ Encodable ç±»å‹çš„æ•°æ®</li>
                        <li>æŒ‰æ—¶é—´è‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶</li>
                        <li>å¯é…ç½®ç›¸åŒ key çš„å†™å…¥æ—¶é—´é—´éš”ï¼Œé¿å…é‡å¤è®°å½•</li>
                        <li>å¼‚æ­¥å†™å…¥ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
                        <li>JSON æ ¼å¼å­˜å‚¨ï¼Œç»“æ„åŒ–ä¾¿äºåˆ†æ</li>
                        <li>æ¯æ¡æ—¥å¿—åŒ…å«æ—¶é—´æˆ³ã€ç´¢å¼•ç­‰å…ƒä¿¡æ¯</li>
                    </ul>
                </div>

                <div style="margin-top: 20px;">
                    <span class="tag">iOS 13.0+</span>
                    <span class="tag">macOS 10.15+</span>
                    <span class="tag">tvOS 13.0+</span>
                    <span class="tag">Swift 5.0+</span>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">å®‰è£…æ–¹å¼</h2>
                <div class="code-block">
                    <div class="code-header"><span class="code-lang">Ruby (Podfile)</span></div>
                    <pre><code class="language-ruby">pod 'ADKit/Log'</code></pre>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">åŸºç¡€ä½¿ç”¨</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ è®°å½•å­—ç¬¦ä¸²</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼</span></div>
                        <pre><code class="language-swift">import ADKit

// ä½¿ç”¨å…¨å±€å…±äº«å®ä¾‹
LogRecorder.shared.saveLog(
    content: "åº”ç”¨å¯åŠ¨",
    key: "app_lifecycle"
)

LogRecorder.shared.saveLog(
    content: "ç”¨æˆ·ç‚¹å‡»äº†æäº¤æŒ‰é’®",
    key: "user_action"
)</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ è®°å½•è‡ªå®šä¹‰å¯¹è±¡</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®°å½•å¤æ‚çš„æ•°æ®ç»“æ„</span></div>
                        <pre><code class="language-swift">// å®šä¹‰æ—¥å¿—æ¨¡å‹
struct UserAction: Codable {
    let action: String
    let userId: Int
    let timestamp: Date
    let metadata: [String: String]?
}

// è®°å½•æ—¥å¿—
let action = UserAction(
    action: "ç™»å½•",
    userId: 12345,
    timestamp: Date(),
    metadata: ["device": "iPhone 14 Pro"]
)

LogRecorder.shared.saveLog(
    content: action,
    key: "user_action"
)</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“ ä½¿ç”¨æ—¶é—´é—´éš”é™åˆ¶</h3>
                    <div class="description">
                        å¯ä»¥è®¾ç½®ç›¸åŒ key çš„æœ€å°å†™å…¥é—´éš”ï¼Œé¿å…é‡å¤è®°å½•ç›¸åŒçš„æ—¥å¿—ã€‚
                    </div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>é˜²æ­¢é¢‘ç¹è®°å½•</span></div>
                        <pre><code class="language-swift">// ç›¸åŒ key è‡³å°‘é—´éš” 60 ç§’æ‰ä¼šè®°å½•
LogRecorder.shared.saveLog(
    content: "æŒ‰é’®ç‚¹å‡»",
    key: "button_tap",
    minIntervalBetweenSameKey: 60
)

// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šä¼šè®°å½•
LogRecorder.shared.saveLog(content: "ç‚¹å‡»", key: "action", minIntervalBetweenSameKey: 10)

// 5 ç§’åå†æ¬¡è°ƒç”¨ï¼šä¸ä¼šè®°å½•ï¼ˆè·ç¦»ä¸Šæ¬¡ä¸è¶³ 10 ç§’ï¼‰
DispatchQueue.main.asyncAfter(deadline: .now() + 5) {
    LogRecorder.shared.saveLog(content: "ç‚¹å‡»", key: "action", minIntervalBetweenSameKey: 10)
}

// 15 ç§’åè°ƒç”¨ï¼šä¼šè®°å½•ï¼ˆè·ç¦»ä¸Šæ¬¡è¶…è¿‡ 10 ç§’ï¼‰
DispatchQueue.main.asyncAfter(deadline: .now() + 15) {
    LogRecorder.shared.saveLog(content: "ç‚¹å‡»", key: "action", minIntervalBetweenSameKey: 10)
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">ä½¿ç”¨åœºæ™¯</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ åº”ç”¨ç”Ÿå‘½å‘¨æœŸè¿½è¸ª</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è¿½è¸ªåº”ç”¨çŠ¶æ€</span></div>
                        <pre><code class="language-swift">class AppDelegate: UIResponder, UIApplicationDelegate {
    
    func application(_ application: UIApplication,
                    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        
        LogRecorder.shared.saveLog(
            content: "åº”ç”¨å¯åŠ¨",
            key: "app_lifecycle"
        )
        
        return true
    }
    
    func applicationWillResignActive(_ application: UIApplication) {
        LogRecorder.shared.saveLog(
            content: "åº”ç”¨å³å°†è¿›å…¥åå°",
            key: "app_lifecycle"
        )
    }
    
    func applicationDidBecomeActive(_ application: UIApplication) {
        LogRecorder.shared.saveLog(
            content: "åº”ç”¨å·²æ¿€æ´»",
            key: "app_lifecycle"
        )
    }
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ ç”¨æˆ·è¡Œä¸ºè¿½è¸ª</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®°å½•ç”¨æˆ·æ“ä½œ</span></div>
                        <pre><code class="language-swift">struct UserInteraction: Codable {
    let screenName: String
    let action: String
    let elementId: String?
    let duration: TimeInterval?
    let additionalInfo: [String: String]?
}

class AnalyticsManager {
    func trackButtonTap(buttonId: String, screen: String) {
        let interaction = UserInteraction(
            screenName: screen,
            action: "button_tap",
            elementId: buttonId,
            duration: nil,
            additionalInfo: nil
        )
        
        LogRecorder.shared.saveLog(
            content: interaction,
            key: "user_interaction"
        )
    }
    
    func trackScreenView(screen: String, duration: TimeInterval) {
        let interaction = UserInteraction(
            screenName: screen,
            action: "screen_view",
            elementId: nil,
            duration: duration,
            additionalInfo: nil
        )
        
        LogRecorder.shared.saveLog(
            content: interaction,
            key: "screen_view"
        )
    }
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ é”™è¯¯æ—¥å¿—è®°å½•</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®°å½•é”™è¯¯ä¿¡æ¯</span></div>
                        <pre><code class="language-swift">struct ErrorLog: Codable {
    let errorType: String
    let errorMessage: String
    let stackTrace: String?
    let context: [String: String]?
}

func handleError(_ error: Error, context: [String: String]? = nil) {
    let errorLog = ErrorLog(
        errorType: "\(type(of: error))",
        errorMessage: error.localizedDescription,
        stackTrace: Thread.callStackSymbols.joined(separator: "\n"),
        context: context
    )
    
    LogRecorder.shared.saveLog(
        content: errorLog,
        key: "error",
        minIntervalBetweenSameKey: 1  // ç›¸åŒé”™è¯¯è‡³å°‘é—´éš” 1 ç§’
    )
}

// ä½¿ç”¨ç¤ºä¾‹
do {
    try someOperation()
} catch {
    handleError(error, context: [
        "screen": "ProfileView",
        "userId": "12345"
    ])
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ ç½‘ç»œè¯·æ±‚æ—¥å¿—</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®°å½• API è¯·æ±‚</span></div>
                        <pre><code class="language-swift">struct APILog: Codable {
    let url: String
    let method: String
    let statusCode: Int?
    let duration: TimeInterval
    let responseSize: Int?
    let error: String?
}

class NetworkLogger {
    func logRequest(
        url: String,
        method: String,
        statusCode: Int?,
        duration: TimeInterval,
        responseSize: Int?,
        error: String?
    ) {
        let log = APILog(
            url: url,
            method: method,
            statusCode: statusCode,
            duration: duration,
            responseSize: responseSize,
            error: error
        )
        
        LogRecorder.shared.saveLog(
            content: log,
            key: "api_request"
        )
    }
}

// ä½¿ç”¨ç¤ºä¾‹
let startTime = Date()
URLSession.shared.dataTask(with: request) { data, response, error in
    let duration = Date().timeIntervalSince(startTime)
    let statusCode = (response as? HTTPURLResponse)?.statusCode
    
    NetworkLogger().logRequest(
        url: request.url?.absoluteString ?? "",
        method: request.httpMethod ?? "",
        statusCode: statusCode,
        duration: duration,
        responseSize: data?.count,
        error: error?.localizedDescription
    )
}.resume()</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ æ€§èƒ½ç›‘æ§</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®°å½•æ€§èƒ½æ•°æ®</span></div>
                        <pre><code class="language-swift">struct PerformanceLog: Codable {
    let operation: String
    let duration: TimeInterval
    let memoryUsage: UInt64?
    let cpuUsage: Double?
}

class PerformanceMonitor {
    func measureOperation(_ name: String, operation: () -> Void) {
        let startTime = Date()
        let startMemory = getMemoryUsage()
        
        operation()
        
        let duration = Date().timeIntervalSince(startTime)
        let endMemory = getMemoryUsage()
        
        let log = PerformanceLog(
            operation: name,
            duration: duration,
            memoryUsage: endMemory - startMemory,
            cpuUsage: nil
        )
        
        LogRecorder.shared.saveLog(
            content: log,
            key: "performance",
            minIntervalBetweenSameKey: 5
        )
    }
    
    private func getMemoryUsage() -> UInt64 {
        var info = mach_task_basic_info()
        var count = mach_msg_type_number_t(MemoryLayout<mach_task_basic_info>.size)/4
        
        let result = withUnsafeMutablePointer(to: &info) {
            $0.withMemoryRebound(to: integer_t.self, capacity: 1) {
                task_info(mach_task_self_,
                         task_flavor_t(MACH_TASK_BASIC_INFO),
                         $0,
                         &count)
            }
        }
        
        return result == KERN_SUCCESS ? info.resident_size : 0
    }
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">é«˜çº§åŠŸèƒ½</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ è‡ªå®šä¹‰æ—¥å¿—å®ä¾‹</h3>
                    <div class="description">
                        é™¤äº†ä½¿ç”¨å…¨å±€çš„ shared å®ä¾‹ï¼Œä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„ LogRecorder å®ä¾‹ï¼Œä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åå‰ç¼€ã€‚
                    </div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>åˆ›å»ºå¤šä¸ªæ—¥å¿—å®ä¾‹</span></div>
                        <pre><code class="language-swift">class LogManager {
    // ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
    let userLogger = LogRecorder(logNamePrefix: "user_behavior")
    
    // ç½‘ç»œè¯·æ±‚æ—¥å¿—
    let networkLogger = LogRecorder(logNamePrefix: "network")
    
    // é”™è¯¯æ—¥å¿—
    let errorLogger = LogRecorder(logNamePrefix: "error")
    
    func logUserAction(_ action: String) {
        userLogger.saveLog(
            content: action,
            key: "action"
        )
    }
    
    func logNetworkRequest(_ request: APILog) {
        networkLogger.saveLog(
            content: request,
            key: "request"
        )
    }
    
    func logError(_ error: ErrorLog) {
        errorLogger.saveLog(
            content: error,
            key: "error"
        )
    }
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ è·å–æ—¥å¿—æ–‡ä»¶è·¯å¾„</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>è®¿é—®æ—¥å¿—æ–‡ä»¶</span></div>
                        <pre><code class="language-swift">// è·å–å½“å‰æ—¥å¿—æ–‡ä»¶è·¯å¾„
if let logPath = LogRecorder.shared.getCurrentLogFilePath() {
    print("æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼š\(logPath)")
    
    // è¯»å–æ—¥å¿—å†…å®¹
    if let content = try? String(contentsOfFile: logPath) {
        print("æ—¥å¿—å†…å®¹ï¼š\(content)")
    }
    
    // åˆ†äº«æ—¥å¿—æ–‡ä»¶
    let activityVC = UIActivityViewController(
        activityItems: [URL(fileURLWithPath: logPath)],
        applicationActivities: nil
    )
    present(activityVC, animated: true)
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ”¹ é‡ç½®æ—¶é—´æˆ³</h3>
                    <div class="description">
                        æ¸…ç©ºæ‰€æœ‰è®°å½•çš„æ—¶é—´æˆ³ï¼Œç”¨äºæµ‹è¯•æˆ–é‡ç½®æ—¥å¿—é™åˆ¶ã€‚
                    </div>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">Swift</span><span>é‡ç½®æ—¶é—´æˆ³</span></div>
                        <pre><code class="language-swift">// æ¸…ç©ºæ‰€æœ‰æ—¶é—´æˆ³è®°å½•
LogRecorder.shared.resetTimestamps()

// ä¹‹åçš„æ—¥å¿—ä¸å—ä¹‹å‰çš„æ—¶é—´é—´éš”é™åˆ¶</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">æ—¥å¿—æ ¼å¼</h2>
                
                <div class="description">
                    æ—¥å¿—ä»¥ JSON æ•°ç»„æ ¼å¼å­˜å‚¨ï¼Œæ¯æ¡æ—¥å¿—åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
                </div>

                <table class="api-table">
                    <thead>
                        <tr>
                            <th style="width: 25%;">å­—æ®µ</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>key</code></td>
                            <td>æ—¥å¿—çš„é”®ï¼Œç”¨äºåˆ†ç±»</td>
                        </tr>
                        <tr>
                            <td><code>date</code></td>
                            <td>å¯è¯»çš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²</td>
                        </tr>
                        <tr>
                            <td><code>timestamp</code></td>
                            <td>Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>content</code></td>
                            <td>æ—¥å¿—å†…å®¹ï¼ˆä»»æ„ Encodable ç±»å‹ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>log_index</code></td>
                            <td>æ—¥å¿—åºå·</td>
                        </tr>
                    </tbody>
                </table>

                <div class="subsection">
                    <h3 class="subsection-title">ğŸ“„ æ—¥å¿—æ–‡ä»¶ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <div class="code-header"><span class="code-lang">JSON</span><span>log_global_shared_2025-10-29_14-30-00.json</span></div>
                        <pre><code class="language-json">[
{
  "content" : "åº”ç”¨å¯åŠ¨",
  "date" : "2025-10-29 14:30:05 GMT+8",
  "key" : "app_lifecycle",
  "log_index" : 0,
  "timestamp" : 1730189405
},
{
  "content" : {
    "action" : "ç™»å½•",
    "metadata" : {
      "device" : "iPhone 14 Pro"
    },
    "timestamp" : 1730189410.523,
    "userId" : 12345
  },
  "date" : "2025-10-29 14:30:10 GMT+8",
  "key" : "user_action",
  "log_index" : 1,
  "timestamp" : 1730189410
},
{
  "content" : {
    "duration" : 0.523,
    "error" : null,
    "method" : "POST",
    "responseSize" : 1024,
    "statusCode" : 200,
    "url" : "https://api.example.com/login"
  },
  "date" : "2025-10-29 14:30:11 GMT+8",
  "key" : "api_request",
  "log_index" : 2,
  "timestamp" : 1730189411
},
]</code></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">API å‚è€ƒ</h2>
                
                <table class="api-table">
                    <thead>
                        <tr>
                            <th style="width: 45%;">æ–¹æ³•</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>init(logNamePrefix:)</code></td>
                            <td>åˆ›å»º LogRecorder å®ä¾‹</td>
                        </tr>
                        <tr>
                            <td><code>saveLog(content:key:minIntervalBetweenSameKey:)</code></td>
                            <td>ä¿å­˜æ—¥å¿—</td>
                        </tr>
                        <tr>
                            <td><code>getCurrentLogFilePath()</code></td>
                            <td>è·å–å½“å‰æ—¥å¿—æ–‡ä»¶è·¯å¾„</td>
                        </tr>
                        <tr>
                            <td><code>resetTimestamps()</code></td>
                            <td>æ¸…ç©ºæ‰€æœ‰æ—¶é—´æˆ³è®°å½•</td>
                        </tr>
                        <tr>
                            <td><code>static var shared</code></td>
                            <td>å…¨å±€å…±äº«å®ä¾‹</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section">
                <h2 class="section-title">æœ€ä½³å®è·µ</h2>
                
                <div class="highlight-box">
                    <div class="highlight-box-title">ğŸ’¡ æ¨èåšæ³•</div>
                    <ul class="feature-list" style="margin: 10px 0;">
                        <li>ä½¿ç”¨æœ‰æ„ä¹‰çš„ key æ¥åˆ†ç±»ä¸åŒç±»å‹çš„æ—¥å¿—</li>
                        <li>ä¸ºé¢‘ç¹è§¦å‘çš„äº‹ä»¶è®¾ç½®åˆç†çš„æ—¶é—´é—´éš”</li>
                        <li>åˆ›å»ºä¸“é—¨çš„æ—¥å¿—æ¨¡å‹ï¼ŒåŒ…å«å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
                        <li>å¯¹äºä¸åŒç”¨é€”çš„æ—¥å¿—ï¼Œè€ƒè™‘ä½¿ç”¨ä¸åŒçš„ LogRecorder å®ä¾‹</li>
                        <li>å®šæœŸæ¸…ç†æ—§çš„æ—¥å¿—æ–‡ä»¶ï¼Œé¿å…å ç”¨è¿‡å¤šç©ºé—´</li>
                        <li>åœ¨ç”Ÿäº§ç¯å¢ƒè€ƒè™‘æ·»åŠ æ—¥å¿—åŠ å¯†</li>
                        <li>ä¸è¦è®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€token ç­‰ï¼‰</li>
                        <li>åˆç†ä½¿ç”¨æ—¥å¿—ï¼Œé¿å…è¿‡åº¦è®°å½•å½±å“æ€§èƒ½</li>
                    </ul>
                </div>

                <div class="code-block">
                    <div class="code-header"><span class="code-lang">Swift</span><span>æ¨èçš„å°è£…æ–¹å¼</span></div>
                    <pre><code class="language-swift">class AppLogger {
    static let shared = AppLogger()
    
    private let userLogger = LogRecorder(logNamePrefix: "user")
    private let systemLogger = LogRecorder(logNamePrefix: "system")
    private let errorLogger = LogRecorder(logNamePrefix: "error")
    
    // ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
    func logUserAction(_ action: String, details: [String: String]? = nil) {
        struct UserActionLog: Codable {
            let action: String
            let details: [String: String]?
        }
        
        userLogger.saveLog(
            content: UserActionLog(action: action, details: details),
            key: "action",
            minIntervalBetweenSameKey: 1
        )
    }
    
    // ç³»ç»Ÿäº‹ä»¶æ—¥å¿—
    func logSystemEvent(_ event: String) {
        systemLogger.saveLog(
            content: event,
            key: "system_event"
        )
    }
    
    // é”™è¯¯æ—¥å¿—
    func logError(_ error: Error, context: String? = nil) {
        struct ErrorLog: Codable {
            let error: String
            let context: String?
        }
        
        errorLogger.saveLog(
            content: ErrorLog(
                error: error.localizedDescription,
                context: context
            ),
            key: "error"
        )
    }
    
    // å¯¼å‡ºæ‰€æœ‰æ—¥å¿—
    func exportAllLogs() -> [URL] {
        var logFiles: [URL] = []
        
        if let path = userLogger.getCurrentLogFilePath() {
            logFiles.append(URL(fileURLWithPath: path))
        }
        if let path = systemLogger.getCurrentLogFilePath() {
            logFiles.append(URL(fileURLWithPath: path))
        }
        if let path = errorLogger.getCurrentLogFilePath() {
            logFiles.append(URL(fileURLWithPath: path))
        }
        
        return logFiles
    }
}

// ä½¿ç”¨ç¤ºä¾‹
AppLogger.shared.logUserAction("login", details: ["method": "email"])
AppLogger.shared.logSystemEvent("app_launched")
AppLogger.shared.logError(someError, context: "ProfileView")</code></pre>
                </div>
            </div>
        </div>
    </div>

    <script>hljs.highlightAll();</script>
</body>
</html>
